(this["webpackJsonpnc-emulator"]=this["webpackJsonpnc-emulator"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){var r=n(22);e.exports=r},function(e,t,n){e.exports=n(34)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){var r=n(23),a=n(25),o=n(26),c=n(27),i=n(32);function s(e,t,n){var r=c(e,2),a=r[0],o=r[1],i=c(t,2),s=i[0],u=i[1],l={x:0,y:0},h={x:0,y:0},f=(u-o)/(s-a);if(0===f)l.x=(a+s)/2,h.x=(a+s)/2,l.y=o+Math.sqrt(n*n-(a-s)*(a-s)/4),h.y=u-Math.sqrt(n*n-(a-s)*(a-s)/4);else{var d=-1/f,m=(a+s)/2,p=(o+u)/2,v=1+d*d,g=-2*m-d*d*(a+s),b=m*m+d*d*(a+s)*(a+s)/4-(n*n-((m-a)*(m-a)+(p-o)*(p-o)));l.x=(-1*g+Math.sqrt(g*g-4*v*b))/(2*v),h.x=(-1*g-Math.sqrt(g*g-4*v*b))/(2*v),l.y=d*l.x-d*m+p,h.y=d*h.x-d*m+p}return[l,h]}function u(e,t,n){var r=c(e,2),a=r[0],o=r[1],i=c(t,2),s=i[0],u=i[1],l=Math.abs(a-s),h=Math.abs(o-u),f=(n*n+l*l-h*h)/(2*n*l);return f<1&&f>-1?o-u>0?Math.acos(f):-Math.acos(f):0}function l(e,t,n){var r=c(e,2),a=r[0],o=r[1],i=c(t,2),s=i[0],u=i[1],l=Math.abs(a-s),h=Math.abs(o-u),f=Math.sqrt(l*l+h*h),d=(n*n+n*n-f*f)/(2*n*n);return d<1&&d>-1?o-u>0?Math.acos(d):-Math.acos(d):0}function h(e,t,n){var r=c(e,2),a=r[0],o=r[1],i=c(t,2),s=i[0],u=i[1],l=Math.abs(a-s),h=Math.abs(o-u),f=Math.sqrt(l*l+h*h),d=(n*n+n*n-f*f)/(2*n*n);return Math.acos(d)}function f(e,t,n,r){var a=c(e,2),o=a[0],i=a[1],s=c(t,2),u=s[0],l=s[1],h=n.x,f=n.y,d=l-f,m=u-h,p=m*Math.cos(r)-d*Math.sin(r),v=+h.toFixed(4)+ +p.toFixed(4),g=d*Math.cos(r)+m*Math.sin(r),b=+f.toFixed(4)+ +g.toFixed(4);return Math.abs(v-o)<Number.EPSILON&&Math.abs(b-i)<Number.EPSILON}var d=function(){"use strict";function e(){a(this,e)}return o(e,[{key:"arcPath",value:function(e,t,n){var r=c(e,3),a=r[0],o=r[1],i=r[2],d=c(t,3),m=d[0],p=d[1],v=d[2],g=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],b=[],y=s([a,o],[m,p],n),x=0,w=0,M=h([a,o],[m,p],n);a===m&&o===p?M=0:n<0&&(M=2*Math.PI-M),g&&(f([a,o],[m,p],y[0],M)?(x=y[0].x,w=y[0].y):(x=y[1].x,w=y[1].y));var E=l([x+Math.abs(n)*Math.cos(Math.PI),w+Math.abs(n)*Math.sin(Math.PI)],[a,o],n);0===E&&(E=Math.PI);u([m,p],[x,w],n);for(var j=M>0?(v-i)*(2*Math.PI/M):v-i,A=0;A<=50;A+=1){var C=M/50*A,O=Math.PI-C+E,k=x+Math.abs(n)*Math.cos(O),z=w+Math.abs(n)*Math.sin(O),N=i+j*(M*A/50)/Math.PI/2;b.push({x:k,y:z,z:N})}return b}},{key:"parser",value:function(e){return i.parse(e)}},{key:"toPath",value:function(e){var t=this,n=[],a=[],o={x:0,y:0,z:0},c={x:0,y:0,z:0},i=0,s="0";return e&&e.forEach((function(e){if(Object.keys(e).indexOf("mode")>-1&&(i=e.mode),Object.keys(e).indexOf("motion")>-1&&(s=e.motion),e.absolute)if(e.coords){var u=e.coords,l=u.x,h=u.y,f=u.z;u.r;o={x:l?c.x-+l:o.x,y:h?c.y-+h:o.y,z:f?c.z-+f:o.z}}else a.push({error:"no coords with G92"});if(e.coords){var d=e.coords,m=d.x,p=d.y,v=d.z,g=d.r;if(!e.absolute){var b=r({},c);if(c=0===i?{x:m?o.x+ +m:c.x,y:p?o.y+ +p:c.y,z:v?o.z+ +v:c.z}:{x:m?c.x+ +m:c.x,y:p?c.y+ +p:c.y,z:v?c.z+ +v:c.z},s.match(/2|3/g)&&g){var y=t.arcPath([b.x,b.y,b.z],[c.x,c.y,c.z],+g);n=n.concat(y)}else s.match(/0|1/g)&&n.push(r({},c))}}})),a.length>0?a:n}}]),e}();e.exports=d},,,,,,,,,,function(e,t,n){"use strict";var r=n(33);function a(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(a,Error),a.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}return"Expected "+function(e){var t,r,a,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(a=e[t],n[a.type](a));if(o.sort(),o.length>0){for(t=1,r=1;t<o.length;t++)o[t-1]!==o[t]&&(o[r]=o[t],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:a,parse:function(e,t){t=void 0!==t?t:{};var n,o={},c={Start:H},i=H,s=/^[ \t\n]/,u=D([" ","\t","\n"],!1,!1),l=Y("G",!0),h=Y("00",!1),f=Y("01",!1),d=Y("02",!1),m=Y("03",!1),p=Y("0",!1),v=Y("1",!1),g=Y("2",!1),b=Y("3",!1),y=Y("G92",!0),x=/^[XYZIJKR]/i,w=D(["X","Y","Z","I","J","K","R"],!1,!0),M=Y("G9",!0),E=/^[01]/,j=D(["0","1"],!1,!1),A=Y("M",!0),C=Y("-",!1),O=function(e){return e.join("")},k=Y(".",!1),z=/^[0-9]/,N=D([["0","9"]],!1,!1),R=q("Whitespace"),S=/^[ \t]/,F=D([" ","\t"],!1,!1),G=q("Whitespaces"),P=(q("linebreak"),D(["\r","\n"],!1,!1),D([],!1,!1),0),I=[{line:1,column:1}],L=0,Z=[],X=0;if("startRule"in t){if(!(t.startRule in c))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=c[t.startRule]}function Y(e,t){return{type:"literal",text:e,ignoreCase:t}}function D(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function q(e){return{type:"other",description:e}}function W(t){var n,r=I[t];if(r)return r;for(n=t-1;!I[n];)n--;for(r={line:(r=I[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return I[t]=r,r}function B(e,t){var n=W(e),r=W(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function T(e){P<L||(P>L&&(L=P,Z=[]),Z.push(e))}function J(e,t,n){return new a(a.buildMessage(e,t),e,t,n)}function H(){return function(){var t,n,a,c,i,l;if(t=P,n=[],a=P,c=[],(i=K())!==o)for(;i!==o;)c.push(i),i=K();else c=o;if(c!==o){for(i=[],s.test(e.charAt(P))?(l=e.charAt(P),P++):(l=o,0===X&&T(u));l!==o;)i.push(l),s.test(e.charAt(P))?(l=e.charAt(P),P++):(l=o,0===X&&T(u));i!==o?(a,a=c=c):(P=a,a=o)}else P=a,a=o;if(a!==o)for(;a!==o;){if(n.push(a),a=P,c=[],(i=K())!==o)for(;i!==o;)c.push(i),i=K();else c=o;if(c!==o){for(i=[],s.test(e.charAt(P))?(l=e.charAt(P),P++):(l=o,0===X&&T(u));l!==o;)i.push(l),s.test(e.charAt(P))?(l=e.charAt(P),P++):(l=o,0===X&&T(u));i!==o?(a,a=c=c):(P=a,a=o)}else P=a,a=o}else n=o;n!==o&&(t,n=function(e){var t,n=[],a=r(e);try{for(a.s();!(t=a.n()).done;){var o,c=t.value,i={},s={},u=r(c);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.axis?i[l.axis]=l.pos:s=Object.assign({},s,l)}}catch(h){u.e(h)}finally{u.f()}Object.keys(i).length>0&&(s.coords=i),n.push(s)}}catch(h){a.e(h)}finally{a.f()}return n}(n));return t=n}()}function K(){var t;return(t=function(){var t,n,r;t=P,"g"===e.substr(P,1).toLowerCase()?(n=e.charAt(P),P++):(n=o,0===X&&T(l));n!==o?("00"===e.substr(P,2)?(r="00",P+=2):(r=o,0===X&&T(h)),r===o&&("01"===e.substr(P,2)?(r="01",P+=2):(r=o,0===X&&T(f)),r===o&&("02"===e.substr(P,2)?(r="02",P+=2):(r=o,0===X&&T(d)),r===o&&("03"===e.substr(P,2)?(r="03",P+=2):(r=o,0===X&&T(m)),r===o&&(48===e.charCodeAt(P)?(r="0",P++):(r=o,0===X&&T(p)),r===o&&(49===e.charCodeAt(P)?(r="1",P++):(r=o,0===X&&T(v)),r===o&&(50===e.charCodeAt(P)?(r="2",P++):(r=o,0===X&&T(g)),r===o&&(51===e.charCodeAt(P)?(r="3",P++):(r=o,0===X&&T(b))))))))),r!==o?(t,n={motion:parseInt(r)+""},t=n):(P=t,t=o)):(P=t,t=o);return t}())===o&&(t=function(){var t,n,r,a;t=P,(n=V())!==o?(x.test(e.charAt(P))?(r=e.charAt(P),P++):(r=o,0===X&&T(w)),r!==o&&V()!==o&&(a=function(){var t,n,r,a,c,i,s,u;t=P,n=P,45===e.charCodeAt(P)?(r="-",P++):(r=o,0===X&&T(C));r===o&&(r=null);if(r!==o){for(a=P,c=[],i=$();i!==o;)c.push(i),i=$();if(c!==o&&(a,c=O(c)),(a=c)!==o)if(46===e.charCodeAt(P)?(c=".",P++):(c=o,0===X&&T(k)),c===o&&(c=null),c!==o){for(i=P,s=[],u=$();u!==o;)s.push(u),u=$();s!==o&&(i,s=O(s)),(i=s)!==o?n=r=[r,a,c,i]:(P=n,n=o)}else P=n,n=o;else P=n,n=o}else P=n,n=o;n!==o&&(t,n=((l=n)[2]?parseFloat(l.join("")):.001*parseFloat(l.join("")))+"");var l;return t=n}())!==o?(t,c=a,n={axis:r.toLowerCase(),pos:c},t=n):(P=t,t=o)):(P=t,t=o);var c;return t}())===o&&(t=function(){var t,n;t=P,"g92"===e.substr(P,3).toLowerCase()?(n=e.substr(P,3),P+=3):(n=o,0===X&&T(y));n!==o&&(t,n={absolute:!0});return t=n}())===o&&(t=function(){var t,n,r;t=P,"g9"===e.substr(P,2).toLowerCase()?(n=e.substr(P,2),P+=2):(n=o,0===X&&T(M));n!==o?(E.test(e.charAt(P))?(r=e.charAt(P),P++):(r=o,0===X&&T(j)),r!==o?(t,t=n={mode:+r}):(P=t,t=o)):(P=t,t=o);return t}())===o&&(t=function(){var t,n,r,a;t=P,"m"===e.substr(P,1).toLowerCase()?(n=e.charAt(P),P++):(n=o,0===X&&T(A));if(n!==o){if(r=[],(a=U())!==o)for(;a!==o;)r.push(a),a=U();else r=o;r!==o?(t,n=function(e){var t={};return e<10&&(e="0"+e),t["m"+e]=!0,t}(r),t=n):(P=t,t=o)}else P=t,t=o;return t}()),t}function U(){var t,n,r,a,c,i;if(t=P,n=P,45===e.charCodeAt(P)?(r="-",P++):(r=o,0===X&&T(C)),r===o&&(r=null),r!==o){if(a=P,c=[],(i=$())!==o)for(;i!==o;)c.push(i),i=$();else c=o;c!==o&&(a,c=O(c)),(a=c)!==o?n=r=[r,a]:(P=n,n=o)}else P=n,n=o;return n!==o&&(t,n=parseInt(n.join(""))),t=n}function $(){var t;return z.test(e.charAt(P))?(t=e.charAt(P),P++):(t=o,0===X&&T(N)),t}function Q(){var t;return X++,S.test(e.charAt(P))?(t=e.charAt(P),P++):(t=o,0===X&&T(F)),X--,t===o&&(o,0===X&&T(R)),t}function V(){var e,t;for(X++,e=[],t=Q();t!==o;)e.push(t),t=Q();return X--,e===o&&(t=o,0===X&&T(G)),e}if((n=i())!==o&&P===e.length)return n;throw n!==o&&P<e.length&&T({type:"end"}),J(Z,L<e.length?e.charAt(L):null,L<e.length?B(L,L+1):B(L,L))}}},,function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(8),c=n.n(o),i=(n(17),n(4)),s=n(2),u=(n(18),n(19),"G00 X0.Y0.Z0.\nG02X-100.Y100.Z15.R115.\nG02X0Y100.Z0R55.\nG02X100.Y100.Z15.R55.\nG02X0Y0Z0R115.\nM02");var l=function(e){var t=e.setCode,n=Object(r.useState)(u.split(/[\n\r]/g).length),o=Object(s.a)(n,2),c=o[0],i=o[1],l=Object(r.useState)(u),h=Object(s.a)(l,2),f=h[0],d=h[1],m=Object(r.useRef)(null);return Object(r.useEffect)((function(){t(f)})),a.a.createElement("section",{className:"nccode center"},a.a.createElement("div",{className:"line-nums code-style",ref:m},function(){for(var e=[],t=1;t<=c;t++)e.push(a.a.createElement("div",{key:"line-".concat(t)},t,"."));return e}()),a.a.createElement("div",{className:"cnc-code center"},a.a.createElement("textarea",{className:"code-style resize-none",value:f,onChange:function(e){var t=e.target.value,n=f.split(/[\n\r]/g).length;i(n),d(t)},onScroll:function(e){m.current.scrollTop=e.target.scrollTop}})))},h=(n(20),n(3)),f=n(9),d=n(0),m=n(10),p=function(){function e(t,n){Object(h.a)(this,e),this.scene=new d.l,this.camera=new d.j(75,t/n,.1,3e3),this.renderer=new d.q,this.renderer.setSize(t,n),this.camera.position.set(0,1e3,0),this.camera.lookAt(this.scene.position),this.scene.background=new d.c(0),this.mouseLeftDown=!1,this.mousePosition=[],this.object=new d.i,this.object.rotateX(-Math.PI/2),this.scene.add(this.object),this.controls=new m.a(this.camera,this.renderer.domElement),this.controls.enablePan=!1,this.axesHelper=new d.a(300),this.axesHelper.position.set(0,0,5),this.object.add(this.axesHelper)}return Object(f.a)(e,[{key:"line",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14540045,r=new d.g({color:n}),a=[],o=Object(i.a)(t);try{for(o.s();!(e=o.n()).done;){var c=e.value;a.push(new d.p(c[0],c[1],c[2]))}}catch(l){o.e(l)}finally{o.f()}var s=(new d.b).setFromPoints(a),u=new d.f(s,r);u.name="drawline",this.object.add(u.clone())}},{key:"clear",value:function(){this.object.remove(this.object.getObjectByName("drawline"))}},{key:"remove",value:function(){cancelAnimationFrame(this.animateID)}},{key:"animate",value:function(){var e=this.animate;this.animateID=requestAnimationFrame(e.bind(this)),this.renderer.render(this.scene,this.camera)}},{key:"getRendererDom",value:function(){return this.renderer.domElement}},{key:"coordinate",value:function(){var e=new d.e(1e3,50);e.name="coords",this.scene.add(e)}},{key:"setCameraOrigin",value:function(){this.camera.position.set(0,0,1e3)}},{key:"changeDom",value:function(e,t){this.canvas=this.getRendererDom(),this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}}]),e}();var v=function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(!1),u=Object(s.a)(i,2),l=u[0],h=u[1],f=Object(r.useState)(null),d=Object(s.a)(f,2),m=d[0],v=d[1],g=e.lines,b=Object(r.useCallback)((function(e){null!==e&&c(e)})),y=function(){o&&!l&&function(){var e=o.getBoundingClientRect().height,t=o.getBoundingClientRect().width,n=new p(t,e);n.coordinate(),o.appendChild(n.getRendererDom()),n.animate(),h(!0),v(n)}()};return g.length>0&&m&&(m.clear(),m.line(g)),Object(r.useEffect)((function(){return y(),window.addEventListener("resize",(function(){!function(){if(o&&m){o.firstChild&&o.removeChild(o.firstChild);var e=o.getBoundingClientRect(),t=e.width,n=e.height;m.changeDom(t,n),o.appendChild(m.getRendererDom())}}()})),window.removeEventListener("resize",(function(){}))})),a.a.createElement("section",{className:"draw relative"},a.a.createElement("div",{className:"draw-main relative",ref:b}),a.a.createElement("div",{className:"draw-notice"},"Notice: This is using WebGL",a.a.createElement("br",null),"Support WebGL : ",window.WebGLRenderingContext?"True":"False"))};n(21);var g=function(e){var t=e.open,n=void 0!==t&&t,o=e.content,c=void 0===o?"":o,i=Object(r.useState)(n),u=Object(s.a)(i,2),l=u[0],h=u[1];return a.a.createElement("div",{className:"dialog ".concat(l?"grid":"hidden")},a.a.createElement("div",{className:"content dialog-minwidth dialog-minheight"},c.split(/[\r\n]+/g).map((function(e,t){return a.a.createElement("div",{key:t},e)}))),a.a.createElement("div",{className:"control dialog-minwidth "},a.a.createElement("label",{htmlFor:"dialog-close"},"Close"),a.a.createElement("button",{id:"dialog-close",className:"hidden",onClick:function(e){h(!1)}})))},b=n(11),y=n.n(b);var x=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1],c=[],u=new y.a;if(n&&n.match(/[mM]0?2/))try{var h=u.parser(n),f=u.toPath(h);if(f.length>0){var d,m=Object(i.a)(f);try{for(m.s();!(d=m.n()).done;){var p=d.value;c.push([p.x,p.y,p.z])}}catch(b){m.e(b)}finally{m.f()}}}catch(x){console.error(x)}return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"}),a.a.createElement("main",{className:"app-main"},a.a.createElement("div",{id:"draw-nc-code"},a.a.createElement(l,{setCode:o})),a.a.createElement("div",{id:"draw-emulator"},a.a.createElement(v,{lines:c})),a.a.createElement(g,{open:!0,content:"\n  \u6a21\u64ec GM code \u8def\u5f91\uff0c\u7d50\u5c3e\u9700\u6709 M02 \n  \u76ee\u524d\u652f\u63f4\u4ee5\u4e0b code \n  \u2027 G00 X Y Z\n  \u2027 G01 X Y Z  \n  \u2027 G02 Z Y Z R (\u6e2c\u8a66\u4e2d)\n  \u2027 M02\n  \u2027 G90 G91  \n"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.dfa886b8.chunk.js.map